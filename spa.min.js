var $jscomp={scope:{},findInternal:function(a,c,b){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var g=a[e];if(c.call(b,g,e,a))return{i:e,v:g}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){if(b.get||b.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,c,b,d){if(c){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in b||(b[e]={});b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6-impl","es3");var spa=spa||{};
(function(a){jQuery.holdReady(!0);spa=jQuery.extend({buildTaskCount:0,$cache:{},routes:[],current:{},defualts:{shell:"index"}},spa);spa.inits=[];spa.init=function(a){spa.inits.push(a)};spa.onInit=function(){spa.inits.forEach(function(a){a()})};spa.includeScript=function(a){jQuery.ajax({url:a,dataType:"script",async:!1})};spa.includeTemplate=function(a){var b="";jQuery.ajax({url:a,success:function(a){b=a},async:!1});return b};spa.StyleSheets=function(){var c=Object.create(Array.prototype);c.create=
function(){var b=[].slice.apply(arguments),c=jQuery("body");c.length&&(b.unshift(c),b=this.load.apply(this,b));return a.extend(Object.create(this),b)};c.push=function(){var a=[].slice.apply(arguments),c=jQuery("body");c.length&&(a.unshift(c),a=this.load.apply(this,a));return Array.prototype.push.apply(this,a)};c.unload=function(a){return 0===jQuery("body ."+a).length?(a=jQuery("body style."+a),a.remove(),a=this.indexOf(a[0]),0!==~a&&this.splice(a,1),!0):!1};c.load=function(a){var c,b=[].slice.apply(arguments);
b.shift();for(var g=b.length,f=0;f<g;f++)c=b[f],0===a.children('style[class="'+c.attr("class")+'"]').length?a.append(b[f]):(b.splice(f,1),g--,f--);return b};return c}()})(jQuery);
spa.EventBase=function(){var a={create:function(c){return $.extend(Object.create(a),{__topics:{}},c||{})},init:function(){},subscribe:function(a,c){var b,d=[],f=[];$.isArray(a)||(a=[a]);for(var h=a.length;h--;)b=a[h],~d.indexOf(b)||(Object.hasOwnProperty.call(this.__topics,b)||(this.__topics[b]=[]),f.push(this.__topics[b].push(c)-1),d.push(b));return{remove:function(){for(var a=f.length;a--;)delete this.__topics[b][a]}.bind(this)}},publish:function(a,c){c=c||{};if(!c.disableMiddleware&&this.__topics.__MIDDLEWARE__&&
this.__topics.__MIDDLEWARE__.length&&!this.__topics.__MIDDLEWARE__.every(function(b,d){return b(c,a)}))return!1;var b=_.split(a,":"),d=b[0];!this.__topics[d]||1>this.__topics[d].length||(b.unshift(c),this.__topics[d].forEach(function(a){setTimeout(function(c){a.apply(null,c)},0,b)}))}},c=a.create();spa.subscribe=function(a,d){return c.subscribe(a,d)};spa.publish=function(a,d){return c.publish(a,d)};spa.sub=spa.subscribe;spa.pub=spa.publish;return a}();
spa.RenderBase=function(){return{errorTemplates:{},loadingText:"Loading...",create:function(a){return $.extend(Object.create(this),{setTimeoutMap:{},setIntervalMap:{},$container:jQuery({}),context:{},template:"",cssRules:""},a||{})},loadingStart:function(){this.$container.before(this.loadingText)},__setUp:function(a){this.$container=a;this.$container.addClass(this.name);this.loadingStart();this.init()},__parse_style:function(){var a=jQuery('<style class="'+this.name+'-style">');a.append(this.cssRules||
"");this.sheet=spa.$cache.$styleSheets.push(a)},__cleanUp:function(){this.__clearSets();this.$container.removeClass(this.name);spa.$cache.$styleSheets.unload(this.$container.attr("class")+"-style")},on:function(a,c,b){return this.$container.on.apply(this.$container,arguments)},trigger:function(a,c,b){return this.$container.trigger.apply(this.$container,arguments)},setTimeout:function(a,c,b,d){this.setTimeoutMap[a]=window.setTimeout.apply(window,Array.apply(this,arguments).splice(1));return this.setTimeoutMap[a]},
setInterval:function(a,c,b,d){this.setIntervalMap[a]=window.setInterval.apply(window,Array.apply(this,arguments).splice(1));return this.setIntervalMap[a]},__clearSets:function(){for(var a in this.setIntervalMap)clearInterval(this.setIntervalMap[a]);for(a in this.setTimeoutMap)clearTimeout(this.setTimeoutMap[a])},init:function(){this.renderTemplate()},renderTemplate:function(a,c){this.sheet||this.__parse_style();this.$container.html(Mustache.render(this.template,jQuery.extend({},this.context,a||{}),
jQuery.extend({},this.templateMap,c||{})));this.components=this.$find(this.$container)},$find:function(a,c){var b=[];a.find("[data-component-name]").each(function(a,c){var d,e=jQuery(c);d=e.data("component-name");var h=spa.components[d];d=h?e.parents('[data-component-name="'+d+'"]').length?spa.Component.errorTemplates["500"].create({context:{name:d}}):h():spa.Component.errorTemplates["404"].create({context:{name:d}});b.push(d);d.__setUp(e)});return b},$insert:function(a,c){var b;b=a.data("component-name");
var d=spa.components[b];b=d?a.parents('[data-component-name="'+b+'"]').length?spa.Component.errorTemplates["500"].create({context:{name:b}}):d(c||{}):spa.Component.errorTemplates["404"].create({context:{name:b}});this.components.push(b);b.__setUp(a);return b}}}();spa.services={};spa.Service=function(){var a=Object.create(spa.EventBase);a.add=function(a){if(!a.name)return!1;a=this.create(a);a.init();spa.services[a.name]=a};return a}();spa.models={};
spa.Model=function(){var a=Object.create(spa.EventBase);a.add=function(a){if(!a.name)return!1;a=this.create(a);spa.models[a.name]=a;a.init()};return a}();spa.RenderBase.errorTemplates["404"]=spa.RenderBase.create({title:"404",template:"<center><h1><i>Page {{name}} Not Found</i></h1>{{message}}<center>",create:function(a){a.template=a.template||this.template;return spa.RenderBase.create(a)}});
spa.RenderBase.errorTemplates["500"]=spa.RenderBase.create({title:"500",template:"<center><h1><i>SPA error {{name}}</i></h1>{{message}}<center>",create:function(a){a.template=a.template||this.template;return spa.RenderBase.create(a)}});spa.shells={};
spa.Shell=function(){var a=Object.create(spa.RenderBase);a.defaultContainerSelector="#spa-shell";a.add=function(a){if(!a.name)return!1;a=this.create(a);spa.shells[a.name]=a};a.renderTemplate=function(a,b){spa.RenderBase.renderTemplate.call(this,a)};a.update=function(a){a=a||spa.shells[spa.defaults.shell];if(spa.current.shell===a)return!1;spa.current.shell&&spa.current.shell.unload();spa.current.shell=a;a.__setUp(this.$container)};a.unload=function(){this.__cleanUp();(this.components?this.components:
[]).forEach(function(c){a.unload.call(c)}.bind(this))};a.create=function(a){return spa.RenderBase.create.call(this,a)};return a}();spa.components={};spa.Component=function(){var a=Object.create(spa.RenderBase);a.add=function(a){if(!a.name)return!1;spa.components[a.name]=function(b){b=b?$.extend(Object.create(a),b):a;return this.create(b)}.bind(this)};a.create=function(a){return spa.RenderBase.create.call(this,a)};return a}();
spa.Form=function(){var a=Object.create(spa.RenderBase);a.errorMessageClass="input-error-message";a.add=function(a){if(!a.name)return!1;spa.components[a.name]=function(b){b=b?$.extend(Object.create(a),b):a;return this.create(b)}.bind(this)};a.renderErrors=function(a){var b=this;b.$container.find("."+b.errorMessageClass).remove();jQuery.each(a,function(a,c){if(Object.hasOwnProperty.call(b,"set"+a+"Error"))b["set"+a+"Error"](a,c);else b.setError(a,c)})};a.setError=function(a,b){var c=this,e=this.getErrorTarget(a);
b.prototype!==Array.prototype&&(b=[b]);jQuery.each(b,function(a,b){e.append('<span class="'+c.errorMessageClass+'">'+b+"</span>")})};a.getErrorTarget=function(a){return this.$container.find('[for="'+a+'"]')};a.create=function(a){return spa.RenderBase.create.call(this,a)};return a}();spa.routes=[];
spa.Router={defaultRoute:spa.routes,add:function(a){if($.isArray(a))a.forEach(this.add);else{if(!a.uri&&!a.init)return!1;spa.routes.push(a);return!0}},lookup:function(a,c){var b=!1;a=a.replace(/^\/+/,"");c=c||this.defaultRoute;c.some(function(c){var d=XRegExp.exec(a,XRegExp(c.uri,"ix"));if(d)return c.REQ={url:a,re:d},b=c,!0});return b},resolver:function(a,c){c=void 0===c?!0:c;var b=this.lookup(a);b||(b=spa.RenderBase.errorTemplates["404"],b.context={name:a});b.init();spa.Shell.update(b.shell);c&&
spa.Router.historyAdd({url:a},b.title,a)},historyAdd:function(a,c,b){window.history.pushState(a,c,b)}};
spa.init(function(){spa.$cache.$styleSheets=spa.StyleSheets.create();spa.subscribe("__dom-content-loaded-start",function(){spa.$cache.$loader=jQuery("#spa-loader-holder");spa.$cache.$body=jQuery("body");var a=[].slice.call(spa.$cache.$styleSheets);a.length&&(a.unshift(jQuery("head")),spa.$cache.$styleSheets.load.apply({},a));spa.Shell.$container=jQuery(spa.Shell.defaultContainerSelector);jQuery(window).on("popstate",function(a){spa.publish("load-shell",{path:window.location.pathname,isHistory:!1})});
spa.$cache.$body.on("click",".ajax-link",function(a){a.preventDefault();spa.publish("load-shell",{path:jQuery(this).attr("href"),isHistory:!0});return!1})});spa.subscribe("__spa-ready",function(){jQuery.holdReady(!1);spa.publish("load-shell",{path:window.location.pathname,isHistory:!1})});spa.subscribe("load-shell",function(a){spa.Router.resolver(a.path,a.isHistory);spa.$cache.$loader.hide();spa.Shell.$container.show()});(function(){var a=spa.buildTaskCount;spa.subscribe("__dom-content-loaded-end",
function(c){0===a&&spa.publish("__spa-ready");a--});spa.subscribe("spa-build-task-complete",function(c){0===a&&spa.publish("__spa-ready");a--})})()});jQuery(document).on("DOMContentLoaded",function(a){spa.publish("__dom-content-loaded-start");spa.publish("__dom-content-loaded-end")});